# MSC Pegging Hierarchy - Case Study & Technical Analysis

## Executive Summary
The **MSC Pegging Hierarchy** report provides a deep-dive view into the complex supply chain relationships established by ASCP. It traces the lineage from a top-level demand (like a Sales Order) down through all levels of the Bill of Materials and distribution network to the ultimate supply source.

## Business Challenge
In a multi-org, multi-level supply chain, it's hard to know "why" a supply order exists.
-   **Traceability:** "This Purchase Order is for a raw material. Which specific customer order is it supporting?"
-   **Impact Analysis:** "If this shipment from the supplier is delayed, which finished goods in which distribution centers will be affected?"
-   **Allocation:** "We have limited supply. Which orders should we prioritize?"

## Solution
The **MSC Pegging Hierarchy** report visualizes the full pegging tree.

**Key Features:**
-   **End-to-End Trace:** Links Independent Demand (SO) -> Dependent Demand (WIP) -> Supply (PO/Work Order).
-   **Multi-Org:** Can trace pegging across different organizations (e.g., Factory -> Distribution Center).
-   **Details:** Shows dates, quantities, and order numbers at each level of the hierarchy.

## Technical Architecture
The report uses the `MSC_FULL_PEGGING` table, which stores the parent-child links generated by the planning engine.

### Key Tables and Views
-   **`MSC_FULL_PEGGING`**: The core table storing the graph of transaction links.
-   **`MSC_DEMANDS`**: Details of the demand side.
-   **`MSC_SUPPLIES`**: Details of the supply side.
-   **`MSC_SYSTEM_ITEMS`**: Item attributes.

### Core Logic
1.  **Root Selection:** Starts with a specific demand or supply transaction.
2.  **Recursive Traversal:** Uses a `CONNECT BY` query (or recursive CTE) to traverse the `MSC_FULL_PEGGING` table up or down the tree.
3.  **Enrichment:** Joins to the supply/demand tables to get human-readable details.

## Business Impact
-   **Customer Service:** Enables accurate "Available to Promise" (ATP) checks and proactive notification of delays.
-   **Inventory Management:** Helps identify "orphan" supply that can be cancelled.
-   **Supply Chain Visibility:** Provides a clear map of material flow across the enterprise.
